<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="keywords" content="yii framework,presentation,heavydots" />
    <meta name="description" content="A presentation about developing with Yii Framework 1, comparison to Yii2 plus some good practices." />
    <title>Developing with Yii Framework 1, comparison to Yii2 plus some good practices</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <style>
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif);
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body {
        font-family: 'Droid Serif';
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      .remark-slide-content h1 { font-size: 3em; }
      .remark-slide-content h2 { font-size: 2em; }
      .remark-slide-content h3 { font-size: 1.6em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; }
      .large { font-size: 2em; }
      a, a > code {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      code {
        background: #e7e8e2;
        border-radius: 5px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }
        .left-column h2:last-of-type, .left-column h3:last-child {
          color: #000;
        }
      .right-column {
        width: 75%;
        float: right;
        padding-top: 1em;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

name: cover
layout: true
class: center, middle
---
![Yii Framework Presentation](images/yii-framework-presentation-cover.jpg)
#Yii Framework
January 2017 - [HeavyDots](http://heavydots.com/)


---
class: center, middle
## What are we going to see in this presentation?


---
layout: false
.left-column[
  ## Contents
]
.right-column[

- Introduction to Yii

- Developing with Yii Framework 1  

- Resources and good practices  

- Comparing Yii 1 with Yii 2  

- Final conclusions

]

---
class: center, middle
## Who are you?
.footnote[I love talking about myself.. =)]
---
layout: false
.left-column[
  ## Who are you?
### - Author
]
.right-column[

Alexandru Cătălin Trandafir ([@atrandafir](https://twitter.com/atrandafir))

- 1987 - Born in Romania
- 1996 - First computer Pentium 1
- 2001 - First real contact with the Internet
  - mIRC user / [UnderNet](http://www.undernet.org/)
  - [Script kiddie](https://en.wikipedia.org/wiki/Script_kiddie), linux terminal, interested in coding
  - Hobby tweaking HTML &amp; CSS templates from [OSWD](http://www.oswd.org/) and started to learn about PHP
- 2005 - Hired at a software company
  - Classic ASP/VBscript, SQL Server, DBF
  - Classic PHP
  - Used [Prestashop](https://www.prestashop.com/) as development framework
- 2008 - First Yii/MVC contact
  - Developed wide range of projects both hired and freelance
- 2013 - Founded [HeavyDots](http://heavydots.com/)
  
]

---
layout: false
.left-column[
  ## Who are you?
### - Author
### - Company &amp; team
]
.right-column[

### Company  

[HeavyDots](http://heavydots.com/) is specialized in designing and building web based applications and creating original and powerful identity for companies and Start-Ups.

### Team  

- Alexandru Trandafir Catalin / Full stack developer
- Jorge Escalante / Full stack developer
- Pablo Mieres / Art director &amp; UX/UI
  
]

---
class: center, middle
## New to frameworks?


---
.left-column[
  ## New to frameworks?
### - Benefits of using a framework
]
.right-column[

- A good architecture that will give you structure
- More and better organized application
- Separe presentation code from execution or DB code
- Faster development speed
- Easier working with databases
- Better and quickier forms and validations
- More secure application
- Improved authentication methods and access control
- Support for internationalization
- Command line tools or background tasks
- ..plus a lot of goodies, resources and tools making your day better!

Now let's move on and see a simple example of Classic PHP vs MVC framework that 
should provide enough to get started.

.footnote[New to PHP? Well.. [stick with it](http://www.w3schools.com/php/) for a while! :-)]
]


---
.left-column[
  ## New to frameworks?
  ### - Benefits of using a framework
  ### - Classic PHP
]
.right-column[
```php
<?php

# File: sign-up.php

// Config and global stuff
require('inc/config.php');
...

$errors=array();
if (isset($_POST['form_sent'])) {
  // Manual form validation + SQL query to save user
}

?>
<!DOCTYPE html>
<html>
  <head>
   ...
  </head>
  <body>  
    <div id="wrap">
      <?php include("header.php"); ?>
      <!-- 
      HTML form:  
      * plain html inputs
      * manual check of $_POST and $errors
      -->
      <?php include("footer.php"); ?>
    </div>
  </body>
</html>
```
]

---
.left-column[
  ## New to frameworks?
  ### - Benefits of using a framework
  ### - Classic PHP
  ### - MVC framework
]
.right-column[

```php
# File: views/layouts/main.php
// Contains header and footer and in the middle 
// places the content of the current page

# File: views/user/signUp.php
// HTML of current page with the form

# File: forms/SignUpForm.php
// Define form fields and validation rules

# File: models/User.php
// Work with user table in OOP without writing SQL

# File: controllers/UserController.php

public function actionSignUp() {
  $signUpForm = new SignUpForm(); // form object
  if (isset($_POST['SignUpForm'])) { // check form is sent
    $signUpForm->attributes = $_POST['SignUpForm'];
    if ($signUpForm->validate()) {
      // Create new user, assign fields and save it
      $user = new User();
      $user->name=$signUpForm->name;
      ...
      $user->save();
      // Refresh/redirect?
    }
  }
  // Render the signUp view and pass the form object to it
  $this->render('signUp', array('signUpForm'=>$signUpForm);
}
```
]

---
class: center, middle
## Introduction to Yii Framework


---
name: introduction

.left-column[
  ## Introduction to Yii Framework
### - What is Yii
]
.right-column[

Yii is a free, open-source Web application development framework written in PHP5 
that promotes clean, DRY design and encourages rapid development. 

It works to streamline your application development and helps to ensure an extremely efficient, 
extensible, and maintainable end product.

#### What's with the name?

Yii is pronounced as Yee or [ji:], and is an acronym for "Yes It Is!". 

This is often the accurate, and most concise response to inquires from those new to Yii: 

- Is it fast?
- Is it secure?
- Is it professional?
- Is it right for my next project?

Yes, it is!

]


---
.left-column[
  ## Introduction to Yii Framework
  ### - What is Yii
  ### - History
]
.right-column[
- Founder: Qiang Xue
- Previously developed the [Prado](http://www.pradoframework.net/) framework

Yii 1  

- Started: January 1, 2008
- On December 3, 2008 Yii 1.0 released to the public

Yii 2  

- On October 2014 Yii 2.0.0 was released
- Complete rewrite over the previous version
- Keeping the original simplicity and extensibility 
- While adopting the latest technologies and features

]


---
.left-column[
  ## Introduction to Yii Framework
  ### - What is Yii
  ### - History
  ### - Core team
]
.right-column[

### Current Developer Team

- Qiang Xue
  - Washington DC, USA
- Alexander Makarov
  - Russia
- Maurizio Domba Cerin
  - Rovinj, Croatia
- Carsten Brandt
  - Berlin, Germany
- Klimov Paul
  - Donetsk, Ukraine
- Dmitry Naumenko
  - Kiev, Ukraine

### Past Team Members

- [Antonio Ramirez](http://www.ramirezcobos.com/), Timur Ruziev, Wei Zhuo, Sebastián Thierer, Jeffrey Winesett, Y!!, Jonah Turnquist, István Beregszászi

]


---
.left-column[
  ## Introduction to Yii Framework
  ### - What is Yii
  ### - History
  ### - Core team
  ### - Status
]
.right-column[

Currently there are two major versions of Yii:

### Yii 1.1

- Currently under maintenance mode
- Support and bug fixes until December 31, 2016
- Security fixes until December 31, 2018

### Yii 2.0

- Latest version is 2.0.10, released on October 20, 2016
- Complete rewrite of Yii on top of PHP 5.4.0
- New generation of PHP framework
- Not compatible with 1.1

]


---
.left-column[
  ## Introduction to Yii Framework
  ### - What is Yii
  ### - History
  ### - Core team
  ### - Status
  ### - Why Yii?
]
.right-column[

Most frameworks are great, don't worry about choosing one, just decide and get started! 

Yii is the result of rich experience with Web application development and investigation of the most popular Web programming frameworks and applications.

- Easy learning curve (get things done instead of going crazy)
- High-performance, [light &amp; fast](images/performance-20090131.png) both development or production mode (your pc or server won't burn)
- Plenty of features
  - MVC, DAO, Query Builder, Active Record, DB Migration, Form input and validation, Widgets
  - Authentication and authorization, Theming, Web services, I18N, L10N, Caching, Error handling, Security and Code generation
  - Extensible and friendly with third-party code
- Plenty of [documentation](http://www.yiiframework.com/doc/), [tutorials](http://www.yiiframework.com/tutorials/), [wikis](http://www.yiiframework.com/wiki/), [extensions](http://www.yiiframework.com/extensions/)
- Books available on [Packtpub](https://www.packtpub.com/web-development?search=yii&offset=&rows=&sort=) and [Amazon](https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Dstripbooks&field-keywords=yii)
- [Class reference](http://www.yiiframework.com/doc/api/) <- USE IT
- Global community 
  - [Yii Forum](http://www.yiiframework.com/forum/) 285k posts, 189k members
  - [StackOverflow](http://stackoverflow.com/questions/tagged/yii) 15k tag `yii`, 8k tag `yii2`

]

---
class: center, middle
## Developing with Yii Framework 1  


---
class: left, middle
## Wait.. Why Yii 1 and not Yii 2?  

- Yii 1 still rocks!

- Both share a common philosophy (ever learned two latin languages?)

- Stable framework for many years 

- By its nature has a simpler way of doing things 

- Will speed up your development without adding complexity

- Good for deadlines!

- For most projects both can accomplish the goal

- Yii 2 will be the one to focus on for the long term because of its implementation of latest modern day tools

We'll see more thoughts on this in the final part: [Comparing Yii 1 with Yii 2](#comparing).

---
.left-column[
  ## Getting started
  ### - Creating a new project
]
.right-column[

To create a new project you have to use the `yiic webapp` command from the framework folder.

```
USAGE
  yiic webapp <app-path> [<vcs>]

DESCRIPTION
  This command generates an Yii Web Application 
  at the specified location.
  
- app-path: required, the directory for the new app
- vcs: optional, version control system you're going to use
```

For example:   

```
cd /path/to/yii-1.1.16.bca042/framework/
yiic webapp /path/to/my/new/app git
```

]


---
.left-column[
  ## Getting started
  ### - Creating a new project
  ### - Directory structure
]
.right-column[
```
index.php       Web application entry script file
index-test.php  entry script file for the functional tests
assets/         published resource files
css/            CSS files
images/         image files
themes/         application themes
protected/      protected application files
  yiic          yiic command line script for Unix/Linux
  yiic.bat      yiic command line script for Windows
  yiic.php      yiic command line PHP script
  commands/     customized 'yiic' commands
  components/   reusable user components
  config/       configuration files
  controllers/  controller class files
  data/         the sample database
  extensions/   third-party extensions
  messages/     translated messages
  models/       model class files
  runtime/      temporarily generated files
  tests/        test scripts
  views/        controller view and layout files
	 layouts/   layout view files
	 site/      view files for the 'site' controller
```
]


---
.left-column[
  ## Getting started
  ### - Creating a new project
  ### - Directory structure
  ### - Modules
]
.right-column[
## What's a Module?  

- self-contained software unit that consists of models, views, controllers and other supporting components
- must reside inside of an application
- for a large-scale application, we may divide it into several modules
- commonly used features, may be developed in terms of modules so that they can be reused

## How to use Modules?

Faster way to create one is with [Gii](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii) code generation tool.
Once created simply add it to your config file:  

```php
return array(
    ......
    'modules'=>array('my_new_module',...),
    ......
);
```

]


---
.left-column[
  ## Getting started
  ### - Creating a new project
  ### - Directory structure
  ### - Modules
  ### - Config &amp; autoload
]
.right-column[

Based on arrays. Initial config files after creating app:

```
console.php     console applications use separate config file
database.php    the database configuration
main.php        the main configuration file
test.php        the configuration for the functional tests
```

Basically you can put almost all the configurations in the `main.php` but often good practices are to:  

- Split into multiple configuration files for better management. Example including separate config file from `main.php`:  

```php
'db'=>require(dirname(__FILE__).'/database.php'),
```

- Reutilize between console and web apps.
- Create custom config files excluded from version control that will allow each environment different configurations.
- Merge configuration files:  

```php
if (file_exists(dirname(__FILE__) . '/custom.params.php')) {
  $params = CMap::mergeArray($params, require(dirname(__FILE__) . '/custom.params.php'));
}
....
'params' => $params,
```




Learn more details about everything that can be configured in [this wiki](http://www.yiiframework.com/wiki/59/).

]

---
.left-column[
  ## Handling requests
  ### - Controllers and actions
]
.right-column[

Simply create your controllers as the following example:  

```php
class SiteController extends CController
{
    public function actionIndex()
    {
        // ...
    }
 
    public function actionContact()
    {
        // ...
    }
}
```

And then you'll be able to access each of the actions like this:  

```
http://hostname/index.php?r=site/index
http://hostname/index.php?r=site/contact
```

]


---
.left-column[
  ## Handling requests
  ### - Controllers and actions
  ### - URL management
]
.right-column[

```php
// From controller
$this->createUrl($route,$params);
$this->createUrl('site/contact',array(
  'department'=>'support'
));
// From anywhere
Yii::app()->createUrl($route,$params);
// Absolute
Yii::app()->createAbsoluteUrl($route,$params);
// Create link from view (single array)
CHtml::link('Edit post', array('/post/edit','id'=>$post->id));
// Other way to create url from view
$url=CHtml::normalizeUrl(array('/post/edit','id'=>$post->id));
```

You can use this [Yii-JSUrlManager](https://github.com/ains/Yii-JSUrlManager) extension and then run from JS: `Yii.app.createUrl('site/contact',{'department':'support'});`

To achieve [friendly URLs](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls) and more go to `urlManager` config section and adjust how you want your urls to behave and define all the url rules/patterns. 

```php
'rules'=>array(
  // the url you want => module/controller/action
  'get-in-touch'=>'site/contact',
),
```

]


---
.left-column[
  ## Handling requests
  ### - Controllers and actions
  ### - URL management
  ### - Filters
]
.right-column[
- Executed before and/or after a controller action executes
- For example, the [access control filter](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#access-control-filter)
- Can be defined
  - As methods of the controller
  - As individual classes
  
Example of filter and activating it in the controller: 

```php
File: ApiController.php
...
public function filters() {
  return array(
      'userAgent',
  );
}
...
public function filterUserAgent($filterChain) {
  $userAgent=Yii::app()->request->userAgent;
  if (empty($userAgent)) {
    throw new CHttpException(403, 'No User-Agent provided');
  }
  $filterChain->run();
}
```

]


---
.left-column[
  ## Handling requests
  ### - Controllers and actions
  ### - URL management
  ### - Filters
  ### - Query and Post params
]
.right-column[

There are many ways you can access `$_GET` and `$_POST` data, let's see some:  

```php

// Plain old not-so-safe ways
$page=$_GET['page'];
$email=$_POST['email'];

// Yii way

// Get query
Yii::app()->request->getQuery('param_name');
// Get post
Yii::app()->request->getPost('param_name');
// Get or post
Yii::app()->request->getParam('param_name');

// Action Parameter Binding

class PostController extends CController
{
  public function actionCreate($category, $language='en')
  {
    // ...
  }
}

```

]

---
.left-column[
  ## Views and assets
  ### - Views
]
.right-column[
TBD
]


---
.left-column[
  ## Views and assets
  ### - Views
  ### - Themes
]
.right-column[
TBD
]


---
.left-column[
  ## Views and assets
  ### - Views
  ### - Themes
  ### - Assets and scripts
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
  ### - ActiveRecord
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
  ### - ActiveRecord
  ### - DataProvider, Sort, paginate
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
  ### - ActiveRecord
  ### - DataProvider, Sort, paginate
  ### - DAO/SQL
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
  ### - ActiveRecord
  ### - DataProvider, Sort, paginate
  ### - DAO/SQL
  ### - Good practices
]
.right-column[
TBD
]


---
.left-column[
  ## Database
  ### - Setup
  ### - ActiveRecord
  ### - DataProvider, Sort, paginate
  ### - DAO/SQL
  ### - Good practices
  ### - Migrations
]
.right-column[
TBD
]

---
.left-column[
  ## Forms
  ### - FormModel &amp; ActiveRecord
]
.right-column[
TBD
]


---
.left-column[
  ## Forms
  ### - FormModel &amp; ActiveRecord
  ### - Validating data
]
.right-column[
TBD
]


---
.left-column[
  ## Forms
  ### - FormModel &amp; ActiveRecord
  ### - Validating data
  ### - View of the form
]
.right-column[
TBD
]


---
.left-column[
  ## Forms
  ### - FormModel &amp; ActiveRecord
  ### - Validating data
  ### - View of the form
  ### - Processing form
]
.right-column[
TBD
]

---
layout: false
.left-column[
  ## Code Generation
]
.right-column[

## Gii: Automatic Code Generation tool

A module that provides a web interface to:

- Generate Models from database tables

- Generate CRUD: create, read, update, delete  

- Generate Module structure 

It's easy to use. Just [enable it](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#using-gii) in the config file and browse to `http://hostname/path/to/index.php?r=gii`.

The generator tool can also be customized, templated, and extended.

]

---
.left-column[
  ## Widgets
  ### - What's a widget?
]
.right-column[

Widgets are small components of your application that are mainly used from views.

The most direct example could be the [CMenu](http://www.yiiframework.com/doc/api/1.1/CMenu/) widget that allows you to 
insert a navigation menu in your application by providing an array of items in the 
menu. All the logic of detecting active item, generating all html, and so on would 
be taken care from the widget.

```php
// Running a widget from a view
<?php $this->beginWidget('path.to.WidgetClass'); ?>
...body content that may be captured by the widget...
<?php $this->endWidget(); ?>
// or
<?php $this->widget('path.to.WidgetClass'); ?>
```

]


---
.left-column[
  ## Widgets
  ### - What's a widget?
  ### - Example of widgets
]
.right-column[

- Paginator, Grid, ActiveForm, Menu, Breadcrumbs
- Yii comes with most of jQuery UI components already defined as widgets: Autocomplete, Accordion, Dialog, Datepicker and so on
- Make your own!

]


---
.left-column[
  ## Widgets
  ### - What's a widget?
  ### - Example of widgets
  ### - Creating widgets
]
.right-column[

Create your new widget and its view:

```php
// File: protected/widgets/MyWidget.php
<?php
class MyWidget extends CWidget
{
  public $number=0;
    public function run()
    {
        // this method is called by CController::endWidget()
        $var=1+$this->number;
        $this->render('myWidget', array('var'=>$var));
    }
}
// File: protected/widgets/views/myWidget.php
<?php
echo $var;
```

Now call it from somewhere in your app:  

```php
<?php $this->widget('application.widgets.MyWidget', 
  array('number'=>2)); ?>
```

]


---
.left-column[
  ## User session and security
  ### - Log in
]
.right-column[
TBD
]


---
.left-column[
  ## User session and security
  ### - Log in
  ### - Get the user
]
.right-column[
TBD
]


---
.left-column[
  ## User session and security
  ### - Log in
  ### - Get the user
  ### - Cookies
]
.right-column[

![Heavy Jelly eating a cookie](images/heavy-jelly-cookies.png)

### HEAVY JELLY LOVES COOKIES

```php
// Read a cookie
$value = '';
if (isset(Yii::app()->request->cookies['cookie_name'])) {
 $value = Yii::app()->request->cookies['cookie_name']->value;
}

// Write a cookie (IMPORTANT: Reload required)
$cookie=new CHttpCookie('name', 'value', $options);
Yii::app()->request->cookies['cookie_name'] = $cookie;

// Deleting a cookie
unset(Yii::app()->request->cookies['cookie_name']);

```

]


---
.left-column[
  ## User session and security
  ### - Log in
  ### - Get the user
  ### - Cookies
  ### - Access control &amp; RBAC
]
.right-column[
TBD
]


---
.left-column[
  ## User session and security
  ### - Log in
  ### - Get the user
  ### - Cookies
  ### - Access control &amp; RBAC
  ### - Security
]
.right-column[
TBD
]


---
layout: false
.left-column[
  ## I18N
]
.right-column[

## Internationalization

Enable multiple languages:  

```php
// In protected/config/main.php
'sourceLanguage'=>'en',
'language'=>'es',
// Then in controller change as required
Yii::app()->language='it';
```

Translate strings:  

```php
Yii::t('main', 'The user "{username}" does not exist.',
    array('{username}'=>$username));
// translations is saved in arrays
// protected/messages/es/main.php
'The user "{username}" does not exist.'=>'El usuario "{username}" no existe.',
// protected/messages/en/main.php
// protected/messages/it/main.php
```

Massively extract and manage translatios using `yiic message` tool.

Localization can also be done for [Date, Time and Numbers](http://www.yiiframework.com/doc/guide/1.1/es/topics.i18n#date-and-time-formatting).

]

---
layout: false
.left-column[
  ## Console
]
.right-column[

## Command line tools

You can use existing command line tools or create your own.

Go to your project's `protected` folder and run `yiic`:

```
-bash-4.2$ php yiic.php
Yii command runner (based on Yii v1.1.16)
Usage: yiic.php <command-name> [parameters...]

The following commands are available:

 - message
 - migrate
 - shell
 - webapp

To see individual command help, use the following:
   yiic.php help <command-name>  
```

Example of [creating a new custom command](http://www.yiiframework.com/doc/guide/1.1/en/topics.console#creating-commands):  

`protected/commands/EmailSenderCommand.php`

]

---
layout: false
.left-column[
  ## Debugging and Logging
]
.right-column[

## Debugging

```php
// php
print_r();
var_dump();
die();
// yii
CVarDumper::dump($var,$depth=10,$highlight=false);
Yii::app()->end();
```

## Logging

```php
// logging a message of type: 
// trace, warning, error, info, profile
Yii::log($msg,$level=CLogger::LEVEL_INFO,$category);
// by default logs are written to 
// protected/runtime/application.log

// logging behavior can be adjusted from the log component 
// in the config file, and you can define multiple log 
// routes such as file, db, email
// and configure what levels and categories to log
```

]

---
.left-column[
  ## Performance
  ### - Performance Tuning
]
.right-column[
TBD
]


---
.left-column[
  ## Performance
  ### - Performance Tuning
  ### - Caching
]
.right-column[
TBD
]

---
.left-column[
  ## Special topics
  ### - Helpers
]
.right-column[

Helper classes: 

- in views we often need some code snippets to do tiny tasks such as formatting data or generating HTML tags
- place all of these code snippets in a view helper class
- use the helper class in your view files
- Yii has a powerful [CHtml](http://www.yiiframework.com/doc/api/1.1/CHtml) helper that is used a lot in forms and not only
- other interesting helpers to use from any part of the application are [CJSON](http://www.yiiframework.com/doc/api/1.1/CJSON) and [CJavaScript](http://www.yiiframework.com/doc/api/1.1/CJavaScript) that allow you for example to manage json and/or escape javascript data

]

---
.left-column[
  ## Special topics
  ### - Helpers
  ### - Components
]
.right-column[

Yii comes with a lot of default components attached to the application but you 
can also create new ones, either to extend current ones or to create your own.

```php
// File: protected/components/SMSComponent.php
class SMSComponent extends CComponent
{
    public $my_phone;
 
    public function sendSMS($to)
    {
      ...
    }
}
// Configure the app to load it
// application components
'components'=>array(
  'sms'=>array(
    'class' => 'application.components.SMSComponent',
    'my_phone' => 123456,
  ),
)
// Use the component from anywhere
$to=5554444;
Yii:app()->sms->sendSMS($to);
```

]

---
.left-column[
  ## Special topics
  ### - Helpers
  ### - Components
  ### - Behavior
]
.right-column[

Behaviors can be used for some of the following reasons:  

- Allow possibility of a class to extend multiple classes methods, basically creating a Behavior with 2 methods and attaching it to an object, that object will have the 2 methods too
- Other reason is to be able to make an object behave as you want, and reutilize that, for example:
  - [Timestamp](http://www.yiiframework.com/doc/api/1.1/CTimestampBehavior) behavior
  - Slug behavior
  - Etc

]

---
.left-column[
  ## Special topics
  ### - Helpers
  ### - Components
  ### - Behavior
  ### - Events
]
.right-column[

What is an event? It is the fact that we want to express that in certain points in our source code something happens!

More info on events in this [wiki](http://www.yiiframework.com/wiki/327/events-explained/) and in the [guide](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event).

]

---
.left-column[
  ## Special topics
  ### - Helpers
  ### - Components
  ### - Behavior
  ### - Events
  ### - Webservices and APIs
]
.right-column[

Yii comes with an prebuilt and automated way to create SOAP webservices.

As for REST API, with some controllers, url routing and some imagination you can build a REST API in a few steps.

]

---
.left-column[
  ## Special topics
  ### - Helpers
  ### - Components
  ### - Behavior
  ### - Events
  ### - Webservices and APIs
  ### - Testing
]
.right-column[

Yii supports TDD, Unit Testing, and Functional testing. More on testing in the [guide](http://www.yiiframework.com/doc/guide/1.1/en/test.overview).

]

---
.left-column[
  ## Extending Yii
]
.right-column[

## Extending and customizing Yii

Yii is the most flexible and customizable thing on the planet, so.. please dare and push its boundaries!

Take a step further than Yii. Don't just use its widgets and tools, create custom tools and build great original products!  

- What resources are out there? 
  - There are [2k extensions](http://www.yiiframework.com/extensions/) published on the site for you to use them
- What can I extend and customize? [Almost everything](http://www.yiiframework.com/doc/guide/1.1/en/extension.overview)
  - Components: user, urlManager and rules, db, logging, cache 
  - Widgets: Grid, ActiveForm, Pagination, Breadcrumbs, Menu
  - Helpers: CHtml, make your own?
  - And the list is endless..
- It's okay to use all its shortcuts to get stuff done faster but building a great application means to customize the user interface and user experience

]

---
class: center, middle
## Resources and good practices

---
.left-column[
  ## Resources and good practices
  ### - Resources
]
.right-column[
TBD
]

---
.left-column[
  ## Resources and good practices
  ### - Resources
  ### - Good practices
]
.right-column[
TBD
]

---
name: comparing
class: center, middle
## Comparing Yii 1 with Yii 2


---
.left-column[
  ## Yii 1 vs Yii 2
]
.right-column[
TBD SLIDE 1
]

---
.left-column[
  ## Yii 1 vs Yii 2
]
.right-column[
TBD SLIDE 2
]

---
class: center, middle
## Final conclusions

---
.left-column[
  ## Final conclusions
  ### - Example projects
]
.right-column[
TBD
]

---
.left-column[
  ## Final conclusions
  ### - Example projects
  ### - Links
]
.right-column[
TBD
]


---
class: center, middle
## Questions?

---
name: last-page
class: center, middle
template: inverse

## Thank you..  

..for watching!  

..Yii team &amp; community

..[BCN PHP Meetup](https://www.meetup.com/es-ES/php-377/) and [Ironhack](https://www.meetup.com/es-ES/ironhack-barcelona/) for organizing the event!  

..[remark](http://github.com/gnab/remark) presentation tool!

..Jorge, Richard &amp; Angel for feedback!  

..Pablo for feedback and illustration! 

---
class: center, middle
## Ready to hack?

---
class: center, middle

<iframe width="560" height="315" src="http://www.youtube.com/embed/W5fM6WpC_nE" frameborder="0" allowfullscreen></iframe>

    </textarea>
    <script src="js/remark-latest.min.js"></script>
    <script>
      var hljs = remark.highlighter.engine;
    </script>
    <script src="js/remark.language.js"></script>
    <script>
      var slideshow = remark.create({
          highlightStyle: 'monokai',
          highlightLanguage: 'remark',
          highlightLines: true
        }) ;
    </script>
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-10509667-17']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script');
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.scripts[0];
        s.parentNode.insertBefore(ga, s);
      }());
    </script>
  </body>
</html>
